<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>People, Passwords and Process</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
		<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
		<style>
			body {
				background-image: url(http://0f7e4b6f48f01603dbf0-798ceaca68548b7d94e5a0f7efc280b5.r85.cf5.rackcdn.com/grain-backgrounds-3.png);
			}
			section { font-family: 'Open Sans', sans-serif; }
			.dropshadow {text-shadow: 3px 3px #ffffff !important; }
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-background-image="images/building.jpg" data-background-position="top" style="color: black">
					<h2 class="dropshadow" style="color: black">People, Passwords and Process</h2>
					<hr/>
					<h3 class="dropshadow" style="color: black">No witty sub-title</h3>
					<small>Curated by Alex Juarez (@mralexjuarez)</small>
				</section>
				
				<section>
					<h2>Agenda</h2>
					<ul>
						<li class="fragment">Why this topic</li>
						<li>People</li>
						<li>Passwords</li>
						<li>Process</li>
						<li class="fragment">Q &amp; A</li>
					</ul>
				</section>
				
				<section>
					<section>
					<h2>So Why this Topic?</h2>
					<ul>
						<li>Back to Basics</li>
						<li>I like sharing knowledge</li>
					</ul>
				</section>
				
				<section>
					<h2>So Why this Topic?</h2>
					<blockquote>If you can't explain it simply, you don't understand it well enough. <br/>-Albert Einstein</blockquote>
				</section>
				
				</section>
				
				<section>
					<h1>I am not an expert!</h1>
				</section>
								
<!-- SECTION PEOPLE -->				
				<section>
				<section>
					<h1>People</h1>
					<hr/>
					<h3>Usually we are the problem</h3>
				</section>
				<section>
					<h2>Passwords can be leaked</h2>
					<a href="http://boingboing.net/2016/03/30/cnbcs-secure-password-tutori.html"><img src="images/boingboing.png" alt="" /></a>
					<small><a href="http://boingboing.net/2016/03/30/cnbcs-secure-password-tutori.html">http://boingboing.net/2016/03/30/cnbcs-secure-password-tutori.html</a></small>
				</section>
				<section>
					<h2>Passwords can be leaked</h2>
					<a href="http://motherboard.vice.com/read/cnbc-tried-and-massively-failed-to-teach-people-about-password-security"><img src="images/motherboard.png" alt="" /></a>
					<small><a href="http://motherboard.vice.com/read/cnbc-tried-and-massively-failed-to-teach-people-about-password-security">http://motherboard.vice.com/read/cnbc-tried-and-massively-failed-to-teach-people-about-password-security</a></small>
				</section>
				<section>
					<h1>117 Million</h1>
					<h3 class="fragment">The number of linkedin passwords leaked</h3>
				</section>
				<section>
					<h2>June 5th 2012</h2>
					<a href="https://blog.linkedin.com/2012/06/06/linkedin-member-passwords-compromised"><img src="images/linkedin.png" alt="" /></a>
				</section>
				<section>
					<h3>The Passwords were easily cracked</h3>
					From TechCrunch
					<img src="images/unsalted2.png" alt="" />
					<br/>
					From linkedin
					<img src="images/unsalted1.png" alt="" />
				</section>
				<section data-background-image="images/hackers.jpg">
					<table style="background-color:black">
					<tr><td>Rank</td> 	<td>Password</td> 	<td>Frequency</td></tr>
					<tr><td>1</td> 	<td>123456</td> 	<td>753,305</td></tr>
					<tr><td>2</td> 	<td>linkedin</td> 	<td>172,523</td></tr>
					<tr><td>3</td> 	<td>password</td> 	<td>144,458</td></tr>
					<tr><td>4</td> 	<td>123456789</td> 	<td>94,314</td></tr>
					<tr><td>5</td> 	<td>12345678</td> 	<td>63,769</td></tr>
					</table>
					<br/>
					<small style="background-color:black">source <a href="https://www.leakedsource.com/blog/linkedin">https://www.leakedsource.com/blog/linkedin</a></small>
				</section>
				<section>
					<h2>Social Engineering</h2>
					<p>We just want to be helpful. It is in our nature.</p>
					<img src="images/kevin.jpg" alt="" />
				</section>
				<section>
					<h1>We suck!</h1>
					<img src="images/spongebob.png" height="250px" width="250px" alt="" />
				</section>
				</section>
				
<!-- SECTION PASSWORDS -->				
				<section>
				<section>
					<h1>Passwords</h1>
					<hr />
					<h3>An Intro to Account/Password Management</h3>
				</section>
				<section>
					<h2>Accounts/Passwords</h2>
					<ul>
						<ul>
							<li>Files in Play</li>
							<li>Commands for Account Management</li>
							<li>PAM (briefly)</li>
						</ul>
					</ul>
				</section>
				<section>
					<h2>Files in Play</h2>
					<ul>
						<li>/etc/passwd</li>
						<li>/etc/shadow</li>
						<li>/var/log/secure</li>
						<li>/var/log/{wtmp,btmp}</li>
					</ul>
				</section>
				<section>
					<h2>/etc/passwd</h2>
					<img src="images/etc-passwd.png" alt="" />
					<small>USERNAME:"PASSWORD":UID:GID:COMMENT FIELD:HOME DIR:SHELL</small>
					<ul>
						<li>Accessible by everybody</li>
						<li>Does not actually contain the password</li>
					</ul>
					
				</section>
				<section>
					<h2>/etc/shadow</h2>
					<img src="images/etc-shadow.png" alt="" >
					<ul>
					    <li>Username</li>
					    <li>Password</li>
					    <li>Last password change</li>
					    <li>Minimum</li>
					    <li>Maximum</li>
					    <li>Warn</li>
					    <li>Inactive</li>
					    <li>Expire</li>
					</ul>
				</section>
				<section>
					<h2>/var/log/secure</h2>
					Contains some of the following
					<br/>
					<ul>
						<li>User attempts to connect</li>
						<li>A user gaining sudo access</li>
						<li>User disconnects</li>
					</ul>
				</section>
				
				<section>
					<h2>Commands for Account Management</h2>
					<pre># useradd joeracker
# passwd joeracker
Changing password for user joeracker.
New password:
BAD PASSWORD: it is based on a dictionary word
BAD PASSWORD: is too simple</pre>
				</section>
				<section>
					<h2>Getting Account Information</h2>
					<pre># id joeracker
uid=501(joeracker) gid=502(joeracker) groups=502(joeracker)

# finger root
Login: root           			Name: root
Directory: /root                    	Shell: /bin/bash
Last login Sat Aug 29 16:00 2015 (EDT) on pts/0 from 10.0.2.2
No mail.
No Plan.
</pre>
				</section>
				<section>
					<h2>Getting Password Information</h2>

<pre># passwd -S joeracker
joeracker PS 2016-06-08 0 99999 7 -1 (Password set, SHA512 crypt.)

# chage -l joeracker
Last password change				: Jun 09, 2016
Password expires					: never
Password inactive					: never
Account expires						: never
Minimum number of days between password change		: 0
Maximum number of days between password change		: 99999
Number of days of warning before password expires	: 7
</pre>
				</section>
								<section>
									<h2>passwd</h2>
									<p>Change a user's password</p>
									<pre>passwd [USER]</pre>
					
									<p>Lock / Unlock a user account</p>
									<pre>passwd -l [USER]
				passwd -u [USER]</pre>
					
									<p>Expire a user account</p>
									<pre>passwd -e [USER]</pre>
					
								</section>
				
								<section>
									<h2>chage</h2>
									<p>Force a user to change their password on the next login</p>
									<pre>chage -d 0 [USER]</pre>
					
									<p>Expire a user account</p>
									<pre>chage -E $(date -d "1 week" +%F)[USER]</pre>
					
									<p>List Account Info</p>
									<pre>chage -l [USER]</pre>
								</section>
				
								<section>
									<h2>last / lastb</h2>
									<p>last - Show the last users logged in. Writs to /var/log/wtmp</p>
									<p>lastb - Show the last bad attempts /var/log/btmp</p>
								</section>
				<section>
					<h2>PAM (Briefly)</h2>
					<ul>
						<li>Pluggable Authentication Modules</li>
						<li>Single Source of Authentication</li>
						<li>Files in /etc/pam.d</li>
					</ul>
					<img src="images/pam.jpg" alt="" />
				</section>
				
				<section>
					<h2>PAM (Briefly)</h2>
					<pre>module_interface     control_flag     module_name module_arguments</pre>
					<pre>#%PAM-1.0
auth       include	system-auth
account    include	system-auth
password   substack	system-auth
-password   optional	pam_gnome_keyring.so</pre>
				</section>
				
				<section>
					<h2>PAM (Briefly) - Control Flags</h2>
				     <p>required — The module result must be successful for authentication to continue. If the test fails at this point, the user is not notified until the results of all module tests that reference that interface are complete.</p>
				    
					<small>source: <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Managing_Smart_Cards/PAM_Configuration_Files.html">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Managing_Smart_Cards/PAM_Configuration_Files.html</a></small>
				</section>
				
				<section>
					<h2>PAM (Briefly) - Control Flags</h2>
				     <p>requisite — The module result must be successful for authentication to continue. However, if a test fails at this point, the user is notified immediately with a message reflecting the first failed required or requisite module test.</p>
				    
					<small>source: <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Managing_Smart_Cards/PAM_Configuration_Files.html">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Managing_Smart_Cards/PAM_Configuration_Files.html</a></small>
				</section>
				
				<section>
					<h2>PAM (Briefly) - Control Flags</h2>
				     <p>sufficient — The module result is ignored if it fails. However, if the result of a module flagged sufficient is successful and no previous modules flagged required have failed, then no other results are required and the user is authenticated to the service.</p>
				    
					<small>source: <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Managing_Smart_Cards/PAM_Configuration_Files.html">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Managing_Smart_Cards/PAM_Configuration_Files.html</a></small>
				</section>
				
				<section>
					<h2>PAM (Briefly) - Control Flags</h2>
				     <p>optional — The module result is ignored. A module flagged as optional only becomes necessary for successful authentication when no other modules reference the interface.</p>
				    
					<small>source: <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Managing_Smart_Cards/PAM_Configuration_Files.html">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Managing_Smart_Cards/PAM_Configuration_Files.html</a></small>
				</section>
				
				
				<section>
					<h2>PAM (Briefly) - Control Flags</h2>
				     <p>include — Unlike the other controls, this does not relate to how the module result is handled. This flag pulls in all lines in the configuration file which match the given parameter and appends them as an argument to the module.</p>
				    
					<small>source: <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Managing_Smart_Cards/PAM_Configuration_Files.html">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Managing_Smart_Cards/PAM_Configuration_Files.html</a></small>
				</section>
				
				
				<section>
					<h2>/etc/pam.d/system-auth</h2>
					<pre>#%PAM-1.0
# This file is auto-generated.
# User changes will be destroyed the next time authconfig is run.
auth        required      pam_env.so
auth        sufficient    pam_unix.so nullok try_first_pass
auth        requisite     pam_succeed_if.so uid >= 500 quiet
auth        required      pam_deny.so</pre>
				</section>
				
				<section>
					<h2>More PAM Info</h2>
					<p>/usr/share/doc/pam-1.1.1/</p>
				</section>
				
				<section>
					<h2>pam_cracklib</h2>
					<p>password  required pam_cracklib.so difok=3 minlen=15 dcredit= 2 ocredit=2</p>
					<ul>
						<li>Length</li>
						<li>Case</li>
						<li>Character Type</li>
					</ul>
					<p>/usr/share/doc/pam-1.1.1/txts/README.pam_cracklib</p>
					
				</section>
				
				<section>
					<h2>The rest is magic!</h2>
					<img src="images/magic-cat.jpg" alt="" >
				</section>
			</section>
				
<!-- SECTION PROCESS -->								
				<section>
				<section>
					<h1>Process</h1>
					<hr/>
					<h3>Intro to password "recovery"</h3>
				</section>
				<section>
					<h2>Rainbow Table</h2>
					<p>A table of hashed passwords that is pre-computed. Saving on CPU using more space.</p>
				</section>
				<section>
					<h2>Brute Force</h2>
					<p>Much simpler, computing the hash every time. More CPU intensive.</p>
				</section>
				<section>
					<h2>Un-salted Passwords</h2>
					<h3>Remember the linkedin un-salted passwords thing?</h3>
				</section>
				<section>
					<h2>Seasoned Passwords</h2>
					<p>$6$3WmTNdwy$S5AJoTrQtvRcwPqjw/E0xyfvqAO.xMkoJ3S2dee/orSjCCa6wPE0UVydbiiZspnCpcRX.epjGWdj6mew9NDaV1</p>
					<ul>
						<li>6</li>
						<li>3WmTNdwy</li>
						<li>S5AJoTrQtvRcwPqjw/E0xyfvqAO.xMkoJ3S2dee/orSjCCa6wPE0UVydbiiZspnCpcRX.epjGWdj6mew9NDaV1</li>
					</ul>
				</section>
				<section>
					<h2>Tools</h2>
					<ul>
						<li><a href="http://www.openwall.com/john/">John the Ripper</a></li>
						<li><a href="https://hashcat.net/oclhashcat/">HashCat</a></li>
					</ul>
				</section>
				<section>
					<h2>Quick Demo</h2>
					John the Ripper
				</section>
				</section>
				
<!-- SECTION Demo -->								
			    <section>
				<section>
				<h2>In Closing...</h2>
			</section>
			<section>
			    <h2>Contact Information</h2>
                  <div id="hcard-Alex-Juarez" class="vcard">
                   <a class="url fn" href="http://unsupported.io">Alex Juarez</a>
                   <div class="org">Principal Engineer Rackspace</div>
                   <a class="email" href="mailto:alex.juarez@rackspace.com">alex.juarez@rackspace.com</a>
                  <div><span class="category">twitter: <a href="http://www.twitter.com/mralexjuarez" target="_blank">@mralexjuarez</a></span></div><p style="font-size:smaller;">This <a href="http://microformats.org/wiki/hcard">hCard</a> created with the <a href="http://microformats.org/code/hcard/creator">hCard creator</a>.</p>
                  </div>
			</section>

		    <section>
               <h2>A short bio</h2>
               <p>Alex Juarez is a Principal Engineer at Rackspace, touting 8 years with the company. Alex enjoys all things Linux, especially training and mentoring others, and is incredibly qualified to do so as an RHCA/RHCI. When Alex isn't helping others he's crafting killer cocktails and finding the best spots to grub in San Antonio.</p>
               <small>Thanks <a href="https://twitter.com/jilljubs">@jilljubs</a></small>
             </section>

			<section>
                   <h2>Q &amp; A</h2>
                   <h6>(Or we can talk about Whiskey)</h6>
                   <img src="http://0f7e4b6f48f01603dbf0-798ceaca68548b7d94e5a0f7efc280b5.r85.cf5.rackcdn.com/whiskey.jpg" alt="" style="border:0px;"/>
             </section>
			 </section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
             multiplex: {
                    // Example values. To generate your own, see the socket.io server instructions.
                    secret: '', // null so the clients do not have control of the master presentation
                    id: 'cf90ca2a4456b2d2', // id, obtained from socket.io server
                    url: 'podium.unsupported.io' // Location of your socket.io server
            },

            // More info https://github.com/hakimel/reveal.js#dependencies
            dependencies: [
                    { src: 'plugin/markdown/marked.js' },
                    { src: 'plugin/markdown/markdown.js' },
                    { src: 'plugin/notes/notes.js', async: true },
                    { src: '//cdn.socket.io/socket.io-1.3.5.js', async: true },
                    { src: 'plugin/multiplex/master.js', async: true },
                    { src: 'plugin/multiplex/client.js', async: true },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
            ]
		});
		</script>
	</body>
</html>
